<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>DPlayer直播</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="icon" href="favicon.ico" type="image/png" />
</head>
<body bgcolor="black">
    <div id="float-dplayer" class="float-dplayer">
        <div id="dplayer" style="position:absolute;width:100%;height:100%;"></div>
    </div>
    <!-- 引入HLS.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hls.js/1.4.10/hls.min.js"></script>
    <!-- 引入播放器 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dplayer/1.27.1/DPlayer.min.js"></script>
    <!-- 配置播放器 -->
    <script>
        // 监听请求
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const url = urlParams.get('url');
        const logo = urlParams.get('logo');
        const corsState = urlParams.get('cors');
        // 初始化 cors_api
        let cors_api;
        // 跨域地址判定
        if (corsState == 'beijing') {
            cors_api = 'https://cors.ow3.cn/';
        } else if (corsState == 'shanghai') {
            cors_api = 'https://node.csj-cy.com/';
        } else if (corsState == 'HK') {
            cors_api = 'https://abc.wkyteam.com/';
        } else if (corsState == 'TW') {
            cors_api = 'https://cors-anywhere.small-service.gpeastasia.org/';
        } else if (corsState == 'US') {
            cors_api = 'https://proxy.newbgp.com.br/';
        } else {
            cors_api = 'https://cors.ow3.cn/';
        }
        // 检测是否有logo
        if (logo) {
            // 初始化播放器
            window.dpFloat = new DPlayer({
                container: document.getElementById('dplayer'),
                live: true,
                autoplay: true,
                volume: 1,
                logo: logo,
                video: {
                    url: cors_api + url,
                    type: 'hls',
                }
            });
        } else {
            // 初始化播放器
            window.dpFloat = new DPlayer({
                container: document.getElementById('dplayer'),
                live: true,
                autoplay: true,
                volume: 1,
                video: {
                    url: cors_api + url,
                    type: 'hls',
                }
            });
        }
    </script>
</body>

</html>